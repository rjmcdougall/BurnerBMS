<!DOCTYPE html><html lang="en"> <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet"><link href="style.css" rel="stylesheet"><script type="text/javascript">
        const MAXIMUM_NUMBER_OF_BANKS = 16;
        const MAXIMUM_NUMBER_OF_MODULES_PER_DATA_PACKET = 16;

        var DEFAULT_GRAPH_MAX_VOLTAGE = parseFloat('%graph_voltagehigh%');
        var DEFAULT_GRAPH_MIN_VOLTAGE = parseFloat('%graph_voltagelow%');
        var XSS_KEY = '%XSS_KEY%';
    </script><script type="text/javascript" src="jquery.js" integrity="%integrity_file_jquery_js%" crossorigin="anonymous">
    </script><title>BurnerBoard BMS</title></head> <body> <div id="loading"><img src="wait.png" width="64" height="64" alt="Please wait"></div> <div id="myNav" class="overlay"> <!-- Button to close the overlay navigation --> <a id="closebtn" href="#" class="closebtn">&times;</a> <!-- Overlay content --> <div class="overlay-content"> <a id="integration" href="#integration">Integration</a> <a id="storage" href="#storage">Storage</a> <a id="avrprogrammer" href="#avrprogrammer">AVR Programmer</a> <a id="about" href="#about">About</a> </div> </div> <div class="header"> <div class="logocontainer"><img class="logo" src="burnerbms.png" width="230" height="100" alt="BurnerBoard BMS"></div> <div class="header-right"> <a id="home" class="active" href="#home">Home</a> <a id="modules" href="#modules">Modules</a> <a id="settings" href="#settings">Settings</a> </div> </div> <div class="flexgrid"> <div id="error1" class="error">The controller is having difficulty communicating with the cell monitoring modules.</div> <div id="error2" class="error">Controller found <span id="missingmodule1"></span> modules, but is configured for <span id="missingmodule2"></span>.</div> <div id="error3" class="error">Controller is configured to use more modules than it can cope with.</div> <div id="error4" class="error">Waiting for modules to reply</div> <div id="error5" class="error">Module has returned ZERO volt reading, check configuration</div> <div id="error6" class="error">Controller has run out of memory.</div> <div id="iperror" class="error">Cannot communicate with the controller for status updates.</div> <div id="genericerror" class="error">Controller error <span id="genericerrcode"></span></div> <div id="jslibrary" class="error">Javascript library has failed to load correctly, please refresh page.</div> <div id="saveerror" class="error">Failed to save settings.</div> <div id="savesuccess" class="success">Settings saved</div> <div id="genericwarning" class="warning">Controller warning <span id="genericwarningcode"></span></div> <div id="warning1" class="warning">Warning: Module bypass voltage is different to global setting</div> <div id="warning2" class="warning">Warning: Module bypass temperature is different to global setting</div> <div id="warning3" class="warning">Warning: Modules have mixed versions of code, may cause instability</div> <div id="warning4" class="warning">Warning: Modules have mixed versions of hardware/boards</div> <div id="warning5" class="warning">Warning: Logging enabled but SD card not installed/found</div> </div> <div id="info" class="info"> <div id="current" class="stat"><span class="x t">Current:</span><span class="x v"></span></div> </div> <div class="page" id="homePage"> <div class="graphs"> <div id="graph1" style="width:100%%; height:100%%;"></div> <div id="graph2" style="width:100%%; height:100%%;"></div> </div> <div id="graphOptions"> <a id="view2d" href>2D</a> <a id="view3d" href>3D</a> </div> </div> <div class="page" id="aboutPage"> <h1>About</h1> <div class="region"> <h2>Source Code &amp; Hardware</h2> <p>Code:<a href="https://github.com/rjmcdougall/BurnerBMS" rel="noreferrer" target="_blank">https://github.com/rjmcdougall/BurnerBMS</a></p> <p>Hardware: <a href="https://github.com/rjmcdougall/BurnerBMS" rel="noreferrer" target="_blank">https://github.com/rjmcdougall/BurnerBMS</a></p> </div> <div class="region"> <h2>WARNING</h2> <p>This is a dangerous product that will fail and cause injury often. Our policy is safety 3rd. Use this for all safety critical stunts or in any situation where there could be a risk to life.</p> <p>It WILL explode and catch fire, it may not work as expected or at all.</p> <p>The use of this project will involve electrical voltages which will kill - if in doubt, drink tequilla.</p> <p>The use of this project will make you hot. It will also upset local laws or regulations - if in doubt, 2nd tequilla shot.</p> </div> <div class="region"> <h2>License</h2> <p>This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 2.0 ]</p> <a href="https://creativecommons.org/licenses/by-nc-sa/2.0/" rel="noreferrer" target="_blank">https://creativecommons.org/licenses/by-nc-sa/2.0/</a> </div> <div class="region"> <h2>Platform &amp; Version</h2> <p>Host name:<span id="HostName"></span></p> <p>Processor: %PLATFORM%</p> <p>Compiled: %COMPILE_DATE_TIME%</p> <p>Language: <span id="lang">language</span></p> <p>SDK Version:<span id="SdkVersion"></span></p> <p>Min free Heap:<span id="MinFreeHeap"></span></p> <p>Free heap:<span id="FreeHeap"></span></p> <p>Heap size:<span id="HeapSize"></span></p> </div> </div> <div class="page" id="modulesPage"> <h1>Modules</h1> <div class="region wide"> <table id="modulesTable"> <thead> <tr> <th>Bank</th> <th>Module</th> <th>Voltage</th> <th class="hide">V. Min</th> <th class="hide">V. Max</th> <th class="hide">Temp Int °C</th> <th class="hide">Temp Ext °C</th> <th class="hide">Balance energy used (mAh)</th> <th></th> </tr> </thead> <tbody class="rows" id="modulesRows"> </tbody> </table> <div id="settingConfig"> <h2>Settings for module </h2> <form id="settingsForm" method="POST" action="savesetting.json" autocomplete="off"> <div class="settings"> <input name="b" id="b" type="hidden" value> <input name="m" id="m" type="hidden" value> <input name="c" id="c" type="hidden" value> <div> <label for="ModuleId">Module Id</label> <input type="number" name="ModuleId" id="ModuleId" value readonly> </div> <div> <label for="Version">Module version</label> <span name="Version" id="Version"></span> </div> <div> <label for="BypassOverTempShutdown">Bypass over temperature</label> <input type="number" min="20" max="90" step="1" name="BypassOverTempShutdown" id="BypassOverTempShutdown" value="70" required> </div> <div> <label for="BypassThresholdmV">Bypass threshold mV</label> <input type="number" min="1800" max="4500" step="10" name="BypassThresholdmV" id="BypassThresholdmV" value="4100" required> </div> <div> <label for="Calib">Calibration multiplier</label> <input id="Calib" name="Calib" type="number" min="1" max="5" step="0.0001" value="2.100" required> <label for="ActualVoltage">Calculator - Actual measured voltage</label> <input id="ActualVoltage" name="ActualVoltage" type="number" min="0" max="5" step="0.001" value="4.2"> <button type="button" id="CalculateCalibration">Calculate</button> </div> <div> <label for="ExtBCoef">External temperature BCoef</label> <input type="number" min="0" max="9999" step="1" id="ExtBCoef" name="ExtBCoef" value readonly> </div> <div> <label for="IntBCoef">Internal temperature BCoef</label> <input type="number" min="0" max="9999" step="1" id="IntBCoef" name="IntBCoef" value readonly> </div> <div> <label for="LoadRes">Load resistance</label> <input id="LoadRes" name="LoadRes" type="number" value readonly> </div> <div> <label for="mVPerADC">mV per ADC reading</label> <input id="mVPerADC" name="mVPerADC" type="number" value readonly> </div> <input type="submit" value="Save settings"> </div> </form> </div> </div> <div id="globalConfig" class="region"> <h2>Global Settings</h2> <p>Configure all modules to use following parameters:</p> <form id="globalSettingsForm" method="POST" action="saveglobalsetting.json" autocomplete="off"> <div class="settings"> <div> <label for="g2">Bypass threshold mV</label> <input type="number" min="1800" max="4500" step="10" name="BypassThresholdmV" id="g2" value="4100" required> </div> </div> <input id="globalSettingsButton" type="submit" value="Save settings"> </form> </div> </div> <div class="page" id="integrationPage"> <h1>Integration</h1> <p>For security, you will need to re-enter the password for the service(s) you want to enable or modify, before you save.</p> <p>After changes are made, the controller will need to be rebooted, do this manually.</p> <div class="region"> <h2>MQTT</h2> <form id="mqttForm" method="POST" action="savemqtt.json" autocomplete="off"> <div class="settings"> <div> <label for="mqttEnabled">Enabled</label> <input type="checkbox" name="mqttEnabled" id="mqttEnabled"> </div> <div> <label for="mqttTopic">Topic</label> <input type="input" name="mqttTopic" id="mqttTopic" value="burnerbms" required maxlength="32"> </div> <div> <label for="mqttServer">Server</label> <input type="input" name="mqttServer" id="mqttServer" value required maxlength="64"> </div> <div> <label for="mqttPort">Port</label> <input type="number" min="1" max="65535" step="1" name="mqttPort" id="mqttPort" value="1883" required> </div> <div> <label for="mqttUsername">Username</label> <input type="input" autocomplete="username" name="mqttUsername" id="mqttUsername" value required maxlength="32"> </div> <div> <label for="mqttPassword">Password</label> <input type="password" autocomplete="current-password" name="mqttPassword" id="mqttPassword" value required maxlength="32"> </div> <input type="submit" value="Save MQTT settings"> </div> </form> </div> <div class="region"> <h2>Influx Database</h2> <form id="influxForm" method="POST" action="saveinfluxdb.json" autocomplete="off"> <div class="settings"> <div> <label for="influxEnabled">Enabled</label> <input type="checkbox" name="influxEnabled" id="influxEnabled"> </div> <div> <label for="influxServer">Host server</label> <input type="input" name="influxServer" id="influxServer" value="influx" required maxlength="64"> </div> <div> <label for="influxPort">Port</label> <input type="number" min="1" max="65535" step="1" name="influxPort" id="influxPort" value="1883" required> </div> <div> <label for="influxDatabase">Database name</label> <input type="input" name="influxDatabase" id="influxDatabase" value="database" required maxlength="64"> </div> <div> <label for="influxUsername">Username</label> <input type="input" autocomplete="username" name="influxUsername" id="influxUsername" value="myusername" required maxlength="32"> </div> <div> <label for="influxPassword">Password</label> <input type="password" autocomplete="current-password" name="influxPassword" id="influxPassword" value required maxlength="32"> </div> <input type="submit" value="Save Influx DB settings"> </div> </form> </div> </div> <div class="page" id="settingsPage"> <h1>Controller Settings</h1> <div class="region"> <h2>Controller Parameters</h2> <p>BurnerBoard BMS is connected by CANBUS to VESC/other devices and i2c to BMS modules.</p> <form id="banksForm" method="POST" action="savecontrollerconfig.json" autocomplete="off"> <div class="controller"> <div> <label for="controller_id">Controller CAN ID</label> <input type="number" min="1" max="255" step="1" name="controller_id" id="controller_id"> </div> <input type="submit" value="Save controller settings"> </div> </form> </div> <div class="region"> <h2>Modules &amp; Banks</h2> <p>BurnerBoard BMS supports up to 100 modules in total. These modules can be split into banks to support parallel configurations.</p> <p>Example: You have 16 cells configured as 8 in series and 2 in parallel (8S2P).</p> <form id="banksForm" method="POST" action="savebankconfig.json" autocomplete="off"> <div class="settings"> <div> <label for="totalSeriesModules">Number of series cells (eg. 8S)</label> <select name="totalSeriesModules" id="totalSeriesModules"> </select> </div> <div> <label for="totalBanks">Number of parallel banks (eg. 2P)</label> <select name="totalBanks" id="totalBanks"> </select> </div> <input type="submit" value="Save module & bank settings"> </div> </form> </div> <div class="region"> <h2>Network Time Protocol</h2> <p>Time is set via NTP, if your controller is not connected to the Internet. Time based rules will be incorrect. This does not automatically correct for daylight saving.</p> <p>Time now is <span id="timenow"></span></p> <form id="ntpForm" method="POST" action="saventp.json" autocomplete="off"> <div class="settings"> <div> <label for="NTPServer">NTP Server</label> <input type="input" name="NTPServer" id="NTPServer" value required maxlength="64"> </div> <div> <label for="NTPZoneHour">Timezone (hour)</label> <input type="number" min="-23" max="23" step="1" name="NTPZoneHour" id="NTPZoneHour" value="0" required> </div> <div> <label for="NTPZoneMin">Timezone (minute)</label> <input type="number" min="0" max="59" step="1" name="NTPZoneMin" id="NTPZoneMin" value="0" required> </div> <div> <label for="NTPDST">Daylight Saving Enabled</label> <input type="checkbox" name="NTPDST" id="NTPDST"> </div> <input type="submit" value="Save NTP settings"> </div> </form> </div> <div class="region"> <h2>Display Settings</h2> <form id="displaySettingForm" method="POST" action="savedisplaysetting.json" autocomplete="off"> <div class="settings"> <div> <label for="VoltageHigh">Graph voltage scale (high)</label> <select name="VoltageHigh" id="VoltageHigh"> <option>4.50</option> <option>4.25</option> <option>4.00</option> <option>3.75</option> <option>3.50</option> <option>3.25</option> <option>3.00</option> <option>2.75</option> <option>2.50</option> <option>2.25</option> <option>2.00</option> </select> </div> <div> <label for="VoltageLow">Graph voltage scale (low)</label> <select name="VoltageLow" id="VoltageLow"> <option>4.50</option> <option>4.25</option> <option>4.00</option> <option>3.75</option> <option>3.50</option> <option>3.25</option> <option>3.00</option> <option>2.75</option> <option>2.50</option> <option>2.25</option> <option>1.75</option> <option>1.50</option> <option>1.25</option> <option>1.00</option> <option>0.50</option> <option>0.00</option> </select> </div> <input type="submit" value="Save display settings"> </div> </form> </div> </div> <div class="page" id="storagePage"> <h1>Storage</h1> <div class="region"> <h2>SD Card</h2> <p id="sdcardmissing" class="warning">SD card not installed</p> Used <span id="sdcard_used"></span>KiB (<span id="sdcard_used_percent"></span>%%) of <span id="sdcard_total"></span>KiB <p> <button type="button" id="unmount">Unmount</button> <button type="button" id="mount">Mount</button> </p> <ul id="sdcardfiles"></ul> </div> <div class="region"> <h2>Flash Memory</h2> <p>Used <span id="flash_used"></span>KiB (<span id="flash_used_percent"></span>%%) of <span id="flash_total"></span>KiB</p> <ul id="flashfiles"></ul> </div> <div class="region"> <h2>Logging</h2> <p>Cell data and output states can be stored as log files using an SD card.</p> <form id="loggingForm" method="POST" action="savestorage.json" autocomplete="off"> <div class="settings"> <div> <label for="loggingEnabled">SD card logging enabled</label> <input type="checkbox" name="loggingEnabled" id="loggingEnabled"> </div> <div> <label for="loggingFreq">Cell data logging frequency (seconds)</label> <select name="loggingFreq" id="loggingFreq"> <option>15</option> <option>30</option> <option>60</option> <option>90</option> <option>120</option> <option>300</option> </select> </div> <input type="submit" value="Save logging settings"> </div> </form> </div> </div> <script type="text/javascript">
        var g1 = null;
        var g2 = null;
        var g3 = null;

        jQuery.cachedScript = function (url, options) {
            options = $.extend(options || {}, {
                dataType: "script",
                cache: true,
                url: url
            });
            return jQuery.ajax(options);
        };

        $(document).ready(function () {
            $.cachedScript("echarts.min.js").done(function (script, textStatus) {
                    $.cachedScript("echarts_gl.min.js").done(function (script, textStatus) {
                            $.cachedScript("pagecode.js").done(function (script, textStatus) {
                                //All done
                            }).fail(function (jqxhr, settings, exception) {
                                $("#jslibrary").show();
                            });
                        })
                        .fail(function (jqxhr, settings, exception) {
                            $("#jslibrary").show();
                        });
                })
                .fail(function (jqxhr, settings, exception) {
                    $("#jslibrary").show();
                });
        });
    </script> </body> </html> 